var is_continue = 'NO';
$(document).ready(function() {


    $('.create-bid-continue').attr("disabled", 'disabled');
    //$('input[type="submit"]').attr('disabled','disabled');

    function a() {
        var a = f(),
            b = $("input[name=offer_price]"),
            c = $(".fixed-price-stub");

        if ("bid" === a) b.val(""), b.parents(".var-price-stub").show(), c.addClass("hide");
        else {
            var d = h();
            g();
            b.parents(".var-price-stub").hide();

            if( d < 0) d = 0;
            c.removeClass("hide").html("Pay $" + d + " Now");
        }
    }

    function b() {
        var a = $("#service_type");
        a.html($("#bidOptions").html())
    }

    function c() {
        var a = {
            notEmpty: {
                message: "You must place a bid."
            },
            regexp: {
                regexp: /^\d+([\.,]\d+(\.\d+)?)?$/i,
                message: "Numbers only."
            },
            greaterThan: {
                value: 0
            }
        };
        if ("bid" == f()) {
            var b = h();
            var disPrz =  b+1

            a.greaterThan = {
                value: b,
                message: "Minimum $"+disPrz,
                inclusive: !1
            }
        }
        return a
    }

    function d() {
        var a = c();

        if ("bid" === f()) {
            var b = h();
            a.greaterThan.value = b, $("input[name=offer_price]").parents(".form-group").find(".help-block[data-bv-validator=greaterThan]").html("Price must be at least $" + b)

        } else
        $(".bv-form").data("bootstrapValidator").updateStatus("offer_price", "NOT_VALIDATED", null).validateField("offer_price");
            $(".bv-form").data("bootstrapValidator").options.fields.offer_price.validators = a
    }

    function e(a) {
       //console.log(j[serviceType][a].comment_text);
        //$("textarea[name=comment]").attr('placeholder', j[serviceType][a].comment_text);
        //var placeholder = str.replace(":usernameAttribute", $('j[serviceType][a].comment_text'));
        //$("textarea[name=comment]").attr('placeholder', j[serviceType][a].comment_text);
        $("textarea[name=comment]").attr('placeholder', "Type here... ");

        //Call ajax request and pass params
        var url = $('span.get-bid-instruction').attr('data-url');
        var username = $('span.get-bid-instruction').attr('data-username');
        $.ajax({
            url : url,
            data : {
                serviceType : a,
                service     : serviceType,
                username    : username
            },
            success:function(res) {
                // console.log(res);

                //Find a div and append on it
                $('#profile-textarea').find('.display-instruction').html("");
                $('#profile-textarea').find('.display-instruction').append(res);
                $("#textarea-field").bind("change",function(){
						var s_height = document.getElementById('textarea-field').scrollHeight;
						document.getElementById('textarea-field').setAttribute('style','height:'+s_height+'px !important');
					});
						
					
		 $("textarea,input").bind("change",function(){
      	
      	$amount 	= 	$("#offer-price").val();
      	$message = 	$("#profile-message").val();
      	$text		= 	$("#textarea-field").val();
      	
      	sessionStorage.setItem("amount",$amount);
      	sessionStorage.setItem("message",$message);
      	sessionStorage.setItem("text",$text);
      	sessionStorage.setItem("user", $("input[name=username]").val());

      });
   
   
 		if(sessionStorage.getItem("action") &&  sessionStorage.getItem("user") == $("input[name=username]").val()){
   	   			
			$("#offer-price").val(sessionStorage.getItem("amount"));
			$("#profile-message").val(sessionStorage.getItem("message"));
			$("#textarea-field").val(sessionStorage.getItem("text"));
   		
   	}
   
   
					
					
					
					
					
            }
        });

        if(j[serviceType][a] != null && j[serviceType][a].isUploadable === true){
            //$(".profile-textarea").removeClass('col-md-12').addClass('col-md-8');
            $('#FileLoader').show();
            $(".upload-image").show();
        } else{
            //$(".profile-textarea").addClass('col-md-12').removeClass('col-md-8');
            $('#FileLoader').hide();
            $(".upload-image").hide();
        }
    }

    function f() {
        var a = $("#service_type").val();
        return $("#service_type option[value=" + a + "]").data("type")
    }

    function g() {
        $("input[name=offer_price]").attr("value", h())
    }

    function h() {
        var a = $("#service_type").val(),

            b = (f(), $("#service_type option[value=" + a + "]").data("value"));

       //return "" !== b ? parseFloat(b).toFixed(2) : .01

       return "" !== b ? parseFloat(b).toFixed(2) : 4
    }

    function getMinPric(url, a) {
        $.ajax({
            url: url,
            success: function(res) {

                if (res != null && typeof res != 'undefined') {

                    $("#service_type option[value=" + a + "]").attr("data-type", res.type);
                    $("#service_type option[value=" + a + "]").attr("data-value", res.price);

                    if(res.price != "0") {
                        //console.log("helloo");
                        $('.offer-price-focus').val(res.price);
                    }
                    //$('.offer-price-focus').val(res.price);
                    //$('.offer-price-focus').change();
                }
            }
        });
    }


    function  profileInputValidation(serviceType) {

        var service_type = $('select[name="service_type"] option:selected').val();
        var comments = $("#profile-message").val();
        var offer_price = $('.offer-price-focus').val();

       //Validaiton if user not select search user
       if(service_type == 'follow_back' && service == 'instagram') {
            var searchInput = $('#search-profile-input').val();

            if(!searchInput) {
                $('#search-profile-input').addClass('error-box-shadow');
                return false;
            }
        }

        //Validation for textarea
        var profileText = $('#profile-message').val();


        //if(bidInfo[service][service_type].isUploadable) {
        if(j[serviceType][serviceType].isUploadable) {

            var isMediaUpload = $('#bidUpload').find('#theImg').attr('src');

            //Validation message for both textarea and media
            if(typeof isMediaUpload == 'undefined' && typeof profileText == 'undefined' || !profileText) {

                $('.profile-textarea').addClass('light-red-border');
                $('.profile-textarea').css('border-right', '0px none');
                $('#profile-message').css('border', '0px none');

                $('#profile .profile-box .comment-container .upload-image').css('border', '1px solid red');
            }

            //Validation for media
            if(typeof isMediaUpload == 'undefined') {

                $('#profile .profile-box .comment-container .upload-image').css('border', '1px solid red');
                return false;
            }

        }
        //Validation for textarea
        if(!profileText || typeof profileText == 'undefined') {

            $('.profile-textarea').addClass('light-red-border');
            $('.profile-textarea').css('border-right', '0px none');
            $('#profile-message').css('border', '0px none');
        }

        var is_login = $('#is_login').val();
        if(is_login == 'not_login') {

            $.colorbox({
                inline:true,
                href:".login-content",
                width:"340px",
                height:"420px",
                maxWidth: "95%",
                maxHeight: "95%",
                scrolling:false,
            });

           return false;
        }

    }
    var i = c(),
        j = bidInfo,
        k = {

            fields: {
                offer_price: {
                    // trigger: 'change keyup',
                    validators: i
                },
                comment: {
                    validators: {
                        notEmpty: {
                            message: "instruction required."
                        },
                    }
                },
                file: {
                   validators: {
                        notEmpty: {
                            message: "value required."
                        },
                    }
                },
                search_profile_input_field: {
                   validators: {
                        notEmpty: {
                            message: "value required."
                        },
                    }
                },
            }
        };
    $(".bv-form")
        .bootstrapValidator(k)
        .change(function(e){
            $(".create-bid-form")
                .data("bootstrapValidator")
                .updateStatus('offer_price', 'NOT_VALIDATED');
            // .validateField('offer_price');
    })
    .end(),b($("#bid_type").val()), a(), d(), e("follow_back");

    //At onload Auto fill Min Price
    var firsrtSelectOption = $('.select option:eq(1)').val();
    var firstOptionUrl = $('.hold-min-price-url').text();
    firstOptionUrl = firstOptionUrl+'/'+firsrtSelectOption;
    getMinPric(firstOptionUrl, firsrtSelectOption);

    $("#service_type,#mobile_profileTabs").on("change", function() {

        a(), d(), e($(this).val());

        //On change Auto fill Min Price
        var service_type = $('select[name="service_type"] option:selected').val();
        var url = $.trim($('.hold-min-price-url').text());
        url = url+'/'+service_type;
        getMinPric(url, service_type);
    });
    $('.onchangeType').trigger('change');

    $(".btn-edit-comment").click(function(e){
        e.preventDefault();
        $("textarea[name=comment]").trigger('focus');
    });

    //$(".create-bid-form button.submit").on("click", function(a) {
    $("button.create-bid-continue").on("click", function(a) {

			//Check if temp-comment exists

			if($("#textarea-field").length){


				$("#textarea-field").bind("keyup",function(){
					$(".help-block.instruction").remove();
				});
				
		

				if($("#textarea-field").val() == ""){

					$(".help-block.instruction").remove();
					$('<small class="help-block instruction" data-bv-validator="notEmpty" style="border-bottom: none !important; color: #9b3836 !important;" data-bv-for="comment" data-bv-result="INVALID">instruction required.</small>').insertAfter("#textarea-field");



				return false;

				}


			}


        //Set loader in Continuee button

        //$('#preloader5').css('display', 'block');
        $(".create-bid-form").append('<input type="hidden" name="bid_type" value="' + f() + '">');



        var is_login = $('#is_login').val();

        if(is_login == 'not_login') {

            $.colorbox({
                inline:true,
                href:".register-content",
                width:"340px",
                height:"550px",
                maxWidth: "95%",
                maxHeight: "95%",
                scrolling:false,
                speed:5,
                fixed:true,
                onOpen:function(test,t){
                    $('.register-content').find('.help-block').remove();
                    $(".has-error").removeClass("has-error");
                   // is_continue = 'YES';
                },
                onClosed:function(test,t){


                    if(typeof $('form.create-bid-form')[0] != 'undefined' && is_continue == 'YES') {

                        $('form.create-bid-form')[0].submit();
                    }
                }
            });
            return false;
        }

        var b = $(".create-bid-form").data("bootstrapValidator");

       /*
        var service = $("input[name=service]").val();

        if(service == "followback"){

        		text1 = $("#textarea-field").val();
        		text2 = $("#profile-message").val();
        		user = $("input[name=username]").val();
        		instruction = "The name of the website or app to follow on: <b>"+text1+"</b><br>The username to Followback: <b>"+text2+"</b>";
        		$("#profile-message").val(instruction);
        }
        */




        b.isValid() && b.defaultSubmit(), b.validate()





        //$('form.create-bid-form')[0].submit();
        //$(this).trigger('click');
    });
    
    
    
		
		$("#textarea-field").bind("change",function(){
				var s_height = document.getElementById('textarea-field').scrollHeight;
				document.getElementById('textarea-field').setAttribute('style','height:'+s_height+'px !important');
		});
		$("#profile-message").bind("change",function(){
			var s_height = document.getElementById('profile-message').scrollHeight;
			document.getElementById('profile-message').setAttribute('style','height:'+s_height+'px !important');
			///alert(s_height);
		});

      $('.type-tab').on('click', function (e) {
        e.preventDefault();
        var $this = $(this);
        $('.type-tab').parent('li').removeClass('active');
        $this.parent('li').addClass('active');
        var value = $this.data('value');
       	sessionStorage.setItem("action",value);
      	sessionStorage.setItem("user", $("input[name=username]").val());
        $('#service_type').val(value).trigger('change');
        
      });
      
      $("textarea").on("mouseleave",function(){
      
      	$(this).trigger("blur");
      
      });

      $('#mobile_profileTabs').on('change', function (e) {
        console.log(e);
        e.preventDefault();
       
        var $this = $(this);
        $('.type-tab').parent('li').removeClass('active');
        $this.parent('li').addClass('active');
        var value = $this.val();
      	sessionStorage.setItem("action",value);
      	sessionStorage.setItem("user", $("input[name=username]").val());
        $('#service_type').val(value).trigger('change');
      
        
      });

      if ($("#textarea-field").length) {
        $("#textarea-field").attr("autocorrect", "off").attr("autocapitalize", "off").attr("autocomplete", "off").attr("autocomplete", "off");
      }

      $("#service_type").bind("change", function () {
        if ($("#textarea-field").length) {
          $("#textarea-field").attr("autocorrect", "off").attr("autocapitalize", "off").attr("autocomplete", "off").attr("autocomplete", "off");
			$("#textarea-field").bind("change",function(){
				var s_height = document.getElementById('textarea-field').scrollHeight;
				document.getElementById('textarea-field').setAttribute('style','height:'+s_height+'px !important');
			});
			
			}

      });

      $('blue-flat').on('click', function () {
        $(this).button('loading');
      });

      //Remove error shadow class from search input on focusout
      $('#search-profile-input').focusout(function () {
        if ($(this).hasClass('error-box-shadow')) {
          $(this).removeClass('error-box-shadow');
        }
      });
      //Remove error border from textarea on focusout
      $('.profile-textarea').focusout(function () {
        if ($(this).hasClass('light-red-border')) {
          $(this).removeClass('light-red-border');
        }
      });
   
		if(sessionStorage.getItem("action") &&  sessionStorage.getItem("user") == $("input[name=username]").val()){
			if(sessionStorage.getItem("action") == "like"){ $(".actionLike").trigger("click"); };
			if(sessionStorage.getItem("action") == "post_text"){ $(".actionPostText").trigger("click"); };
			if(sessionStorage.getItem("action") == "post_media"){ $(".actionPost").trigger("click"); };
			if(sessionStorage.getItem("action") == "comment"){ $(".actionComment").trigger("click"); };
		} else {
			sessionStorage.setItem("action","");
			sessionStorage.setItem("amount","");
			sessionStorage.setItem("message","");
			sessionStorage.setItem("text","");
		}
    
    
    
    
    
    
});
//# sourceMappingURL=createBid.min.map